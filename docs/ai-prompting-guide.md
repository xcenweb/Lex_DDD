# AI交互指南

## 概述

本文档旨在帮助开发者更好地利用AI与LexDDD基座进行交互，提供最佳实践和提示词模板，以提高开发效率。

## 基本原则

1. **提供上下文**
   - 描述当前项目的DDD架构背景
   - 说明相关代码所在的层次（领域层、应用层等）
   - 提供相关的业务规则和约束

2. **明确意图**
   - 清晰描述需求目标
   - 说明期望的输出格式
   - 指出是否需要遵循特定的设计模式或规范

## 场景示例

### 1. 创建领域实体

```
我需要在领域层创建一个用户实体，包含以下要求：
- 实体需要包含用户基本信息（用户名、邮箱、密码）
- 需要实现值对象来处理密码的加密和验证
- 遵循充血模型，在实体中实现核心业务逻辑
- 需要考虑用户状态的生命周期管理
```

### 2. 实现应用服务

```
请帮我实现用户注册的应用服务，要求：
- 位于应用层，协调领域对象完成注册流程
- 包含事务管理
- 需要调用领域服务进行用户名查重
- 实现结果需要返回统一的响应格式
```

### 3. 编写单元测试

```
需要为用户注册服务编写单元测试：
- 测试用例需要覆盖正常注册流程
- 测试各种异常情况（重复用户名、无效邮箱等）
- 使用mock模拟外部依赖
- 遵循AAA（Arrange-Act-Assert）模式
```

## 提示词模板

### 1. 领域层开发

```
我正在开发[具体业务]的领域层代码，需要：
1. 遵循DDD的设计原则
2. 实现以下业务规则：
   - [规则1]
   - [规则2]
3. 考虑以下约束：
   - [约束1]
   - [约束2]
```

### 2. 应用层开发

```
请帮助实现[业务用例]的应用服务：
1. 需要协调以下领域对象：
   - [对象1]
   - [对象2]
2. 业务流程如下：
   [详细流程描述]
3. 需要处理的异常情况：
   [异常情况列表]
```

### 3. 基础设施层开发

```
需要在基础设施层实现[具体功能]：
1. 技术选型：[具体技术]
2. 需要实现的接口：[接口列表]
3. 性能要求：[具体要求]
4. 需要考虑的配置项：[配置项列表]
```

## 最佳实践

1. **代码生成请求**
   - 明确指出代码所属的层次
   - 说明代码需要遵循的设计模式
   - 列出需要实现的接口和方法
   - 提供相关的业务规则和约束

2. **问题诊断请求**
   - 提供完整的错误信息
   - 说明问题发生的上下文
   - 列出已尝试的解决方案
   - 相关的代码片段

3. **重构建议请求**
   - 说明当前代码的问题
   - 期望达到的目标
   - 需要保持的功能
   - 可以接受的改动范围

## 注意事项

1. **保持领域纯净**
   - 不要在领域层引入基础设施依赖
   - 使用接口而不是具体实现
   - 保持领域模型的独立性

2. **正确的分层**
   - 避免跨层直接调用
   - 通过接口进行层间通信
   - 保持适当的抽象级别

3. **统一的命名规范**
   - 使用领域语言进行命名
   - 保持命名的一致性
   - 避免技术实现细节渗透到命名中

## 常见问题

1. **如何处理跨领域的业务逻辑？**
   - 使用领域服务协调多个聚合根
   - 在应用层编排复杂的业务流程
   - 考虑使用事件驱动的方式解耦

2. **如何平衡性能和代码质量？**
   - 先保证代码的正确性和可维护性
   - 通过性能测试识别瓶颈
   - 在基础设施层优化性能
   - 保持领域模型的简洁性

3. **如何处理领域事件？**
   - 在领域层定义事件
   - 在应用层订阅和处理事件
   - 使用事件存储保证可靠性
   - 考虑事件的幂等性

## 总结

有效的AI交互需要：
1. 清晰的需求描述
2. 完整的上下文信息
3. 符合DDD架构原则的设计思路
4. 遵循最佳实践和规范

通过合理使用提示词模板和遵循最佳实践，可以显著提高与AI的交互效率，获得更好的开发体验。